!function(s,t){"use strict";var e=t.getElementById("text");s.doScroll=function(s){e.classList.remove("show-contents"),e.scrollTop=t.getElementById(s).offsetTop};function i(){s.current_page=e.scrollTop+e.offsetHeight>=e.scrollHeight?s.total_pages:Math.ceil((e.scrollTop+1)/e.offsetHeight),l.innerText=s.current_page}function n(){s.total_pages=Math.ceil(e.scrollHeight/e.offsetHeight),a.innerText=s.total_pages,i()}var a=t.getElementById("total-pages"),l=t.getElementById("current-page");if(s.skazkiId){var c="id="+s.skazkiId,o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST","/ajax/get-skazki-text/"),o.onreadystatechange=function(){3<o.readyState&&200<=o.status&&o.status<300&&(e.innerHTML=o.responseText,n())},o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(c)}else n();var d=t.getElementById("contents-btn");d&&d.addEventListener("click",function(){e.classList.contains("show-contents")?(e.classList.remove("show-contents"),e.scrollTop=s.textScrollTop):(s.textScrollTop=e.scrollTop,e.classList.add("show-contents"),e.scrollTop=0)});var r,L,f=t.getElementById("font-size-minus"),m=t.getElementById("font-size-plus");
f.addEventListener("click",function(){m.classList.contains("disabled")&&m.classList.remove("disabled"),e.classList.contains("fs-xxx")?(e.classList.remove("fs-xxx"),e.classList.add("fs-xl")):e.classList.contains("fs-xl")?(e.classList.remove("fs-xl"),e.classList.add("fs-l")):e.classList.contains("fs-l")?(e.classList.remove("fs-l"),e.classList.add("fs-n")):e.classList.contains("fs-n")&&(e.classList.remove("fs-n"),e.classList.add("fs-s"),this.classList.add("disabled")),n()}),m.addEventListener("click",function(){f.classList.contains("disabled")&&f.classList.remove("disabled"),e.classList.contains("fs-s")?(e.classList.remove("fs-s"),e.classList.add("fs-n")):e.classList.contains("fs-n")?(e.classList.remove("fs-n"),e.classList.add("fs-l")):e.classList.contains("fs-l")?(e.classList.remove("fs-l"),e.classList.add("fs-xl")):e.classList.contains("fs-xl")&&(e.classList.remove("fs-xl"),e.classList.add("fs-xxx"),this.classList.add("disabled")),n()}),t.getElementById("min-max").addEventListener("click",function(){this.classList.contains("icon-max")?(this.classList.remove("icon-max"),this.classList.add("icon-min"),t.body.classList.add("full-screen")):(this.classList.remove("icon-min"),this.classList.add("icon-max"),t.body.classList.remove("full-screen")),n()}),s.addEventListener("resize",function(){s.clearTimeout(r),r=setTimeout(function(){n()},300)},!1),e.addEventListener("scroll",function(){L=L||setTimeout(function(){L=null,e.classList.contains("show-contents")||i()},200)},!1)}(window,document);